!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){"use strict";var e="tinyscrollbar",o={wheel:!0,wheelSpeed:40,wheelLock:!0,touchLock:!0,trackSize:!1,slideSize:!1,slideSizeMin:50};function i(i,n){this.options=t.extend({},o,n),this._defaults=o,this._name=e;var s=this,a=i.find(".overview"),c=i.find(".scrollbar"),l=c.find(".slide"),r="ontouchstart"in document.documentElement,h="onwheel"in document.createElement("div")?"wheel":void 0!==document.onmousewheel?"mousewheel":"DOMMouseScroll",d=0;function u(){return s.contentPosition>0}function p(){return s.contentPosition<=s.contentSize-s.viewportSize-5}function m(o,i){s.hasContentToSroll&&(t("body").addClass("noSelect"),d=i?l.offset()["top"]:o.pageY,r&&(document.ontouchmove=function(t){(s.options.touchLock||u()&&p())&&t.preventDefault(),t.touches[0][e+"Touch"]=1,w(t.touches[0])},document.ontouchend=S),t(document).bind("mousemove",w),t(document).bind("mouseup",S),l.bind("mouseup",S),c.bind("mouseup",S),w(o))}function v(e){if(!e.ctrlKey){if(s.hasContentToSroll){var o=e||window.event,n=-(o.deltaY||o.detail||-1/3*o.wheelDelta)/40,c=1===o.deltaMode?s.options.wheelSpeed:1;s.contentPosition-=n*c*s.options.wheelSpeed,s.contentPosition=Math.min(s.contentSize-s.viewportSize,Math.max(0,s.contentPosition)),s.slidePosition=s.contentPosition/s.trackRatio,i.trigger("move"),l.css("top",s.slidePosition),a.css("top",-s.contentPosition),(s.options.wheelLock||u()&&p())&&(o=t.event.fix(o)).preventDefault()}e.stopPropagation()}}function w(t){if(s.hasContentToSroll){var o=t.pageY,n=t[e+"Touch"]?d-o:o-d,c=Math.min(s.trackSize-s.slideSize,Math.max(0,s.slidePosition+n));s.contentPosition=c*s.trackRatio,i.trigger("move"),l.css("top",c),a.css("top",-s.contentPosition)}}function S(){s.slidePosition=parseInt(l.css("top"),10)||0,t("body").removeClass("noSelect"),t(document).unbind("mousemove",w),t(document).unbind("mouseup",S),l.unbind("mouseup",S),c.unbind("mouseup",S),document.ontouchmove=document.ontouchend=null}return this.contentPosition=0,this.viewportSize=0,this.contentSize=0,this.contentRatio=0,this.trackSize=0,this.trackRatio=0,this.slideSize=0,this.slidePosition=0,this.hasContentToSroll=!1,this.update=function(t){switch(this.viewportSize=i.outerHeight(),this.contentSize=a.outerHeight(),this.contentRatio=this.viewportSize/this.contentSize,this.trackSize=this.options.trackSize||this.viewportSize,this.slideSize=Math.min(this.trackSize,Math.max(this.options.slideSizeMin,this.options.slideSize||this.trackSize*this.contentRatio)),this.trackRatio=(this.contentSize-this.viewportSize)/(this.trackSize-this.slideSize),this.hasContentToSroll=this.contentRatio<1,c.toggleClass("disable",!this.hasContentToSroll),t){case"bottom":this.contentPosition=Math.max(this.contentSize-this.viewportSize,0);break;case"relative":this.contentPosition=Math.min(Math.max(this.contentSize-this.viewportSize,0),Math.max(0,this.contentPosition));break;default:this.contentPosition=parseInt(t,10)||0}return this.slidePosition=this.contentPosition/this.trackRatio,l.css("top",s.slidePosition),a.css("top",-s.contentPosition),c.css("height",s.trackSize),l.css("height",s.slideSize),s},s.update(),r&&(i[0].ontouchstart=function(t){1===t.touches.length&&(t.stopPropagation(),m(t.touches[0]))}),l.bind("mousedown",function(t){t.stopPropagation(),m(t)}),c.bind("mousedown",function(t){m(t,!0)}),t(window).resize(function(){s.update("relative")}),s.options.wheel&&window.addEventListener?i[0].addEventListener(h,v,!1):s.options.wheel&&(i[0].onmousewheel=v),s}t.fn[e]=function(e={}){let o=t(this).data("plugin_scrollbar");if(!o){t(this).addClass("overview").wrap('<div class="viewport"></div>');let n=t(this).parent().css({width:e.width||"100%"});return 0==n.find(".scrollbar").length&&n.append('<div class="scrollbar"><div class="slide"></div></div>'),0==t("style.scrollbar").length&&t("head").append('<style class="scrollbar">.overview{width:100%;height:auto;position:absolute;transition:all 0.2s ease}.viewport:hover>.scrollbar{opacity:0.9}.viewport{height:100%;overflow:hidden;position:relative}.scrollbar{opacity: 0.2;background: linear-gradient(#eee, #999 10% 90%, #eee);transition: all 2s ease;position:absolute;width:14px;right:0;top:0}.slide{transition: all 0.3s ease;box-shadow: 0 0 0 1px rgba(255, 255, 255, 0.8);background:#666;height:20px;width:10px;cursor:pointer;position:absolute;top:0;left:2px;border-radius:10px}.disable>.slide {display: none}.noSelect{user-select:none;-o-user-select:none;-moz-user-select:none;-khtml-user-select:none;-webkit-user-select:none}</style>'),o=new i(n,e),t(this).data("plugin_scrollbar",o),o}o.update()}});