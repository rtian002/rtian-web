<script src="js/rtian.js" ></script>
<meta charset="utf-8" />
<title>.closest() | jQuery API中文文档(适用jQuery 1.0 - jQuery 3.0)</title>
  <div id="content" >
<div class="inner" role="main"><article id="post-101" class="post-101 post type-post status-publish format-standard hentry category-tree-traversal category-13 category-14 category-16">
  <header class="entry-header">
    <h1 class="entry-title">.closest()</h1>
    <hr>
<div class="entry-meta">
      分类: <span class="category">
<a href="traversing.htm"  title="View all posts in Traversing">遍历</a> &gt; 
<a href="tree-traversal.htm"  title="View all posts in Tree Traversal">树遍历</a></span>   </div><!-- .entry-meta -->
      </header><!-- .entry-header -->
  <div class="entry-content">
    <div class="toc">
<h4><span>Contents:</span></h4>
        <ul class="toc-list">
            <li>
<a href="#closest1">.closest( selector )</a>
                <ul>
                    <li>.closest( selector )</li>
                    <li>.closest( selector [, context ] )</li>
                    <li>.closest( jQuery object )</li>
                    <li>.closest( element )</li>
                </ul>
            </li>
            <li>
<a href="#closest2">.closest( selectors [, context ] )</a>
                <ul>
                    <li>.closest( selectors [, context ] )</li>
                </ul>
            </li>
        </ul>
    </div>
      <article id="closest1" class="entry method"><h2 class="section-title">
          <span class="name">.closest( selector )</span><span class="returns">返回: 
<a href="Types.htm#jQuery" >jQuery</a></span>
      </h2>
          <div class="entry-wrapper">
              <p class="desc"><strong>描述: </strong>从元素本身开始，在DOM 树上逐级向上级元素匹配，并返回最先匹配的祖先元素。</p>
              <ul class="signatures">
                  <li class="signature" id="closest-selector">
                      <h4 class="name">
                          <span class="version-details">添加的版本: 
<a href="1.3.htm" >1.3</a></span>.closest(
                          selector )</h4>
                      <ul>
                          <li>
                              <div><strong>selector</strong></div>
                              <div>类型: 
<a href="Types.htm#Selector" >Selector</a>
                              </div>
                              <div>一个用于匹配元素的选择器字符串。</div>
                          </li>
                      </ul>
                  </li>
                  <li class="signature" id="closest-selector-context">
                      <h4 class="name">
                          <span class="version-details">添加的版本: 
<a href="1.4.htm" >1.4</a></span>.closest(
                          selector [, context ] )</h4>
                      <ul>
                          <li>
                              <div><strong>selector</strong></div>
                              <div>类型: 
<a href="Types.htm#Selector" >Selector</a>
                              </div>
                              <div>一个用于匹配元素的选择器字符串。</div>
                          </li>
                          <li>
                              <div><strong>context</strong></div>
                              <div>类型: 
<a href="Types.htm#Element" >Element</a>
                              </div>
                              <div>匹配元素可能在这个 DOM 元素内查找到。（如果提供这个参数，那么在这个DOM元素内查找匹配的元素，可以使用这个参数减小查找范围，如果在这个在这个DOM元素内没有查找到匹配的元素，那么返回空的jQuery对象。可选参数）
                              </div>
                          </li>
                      </ul>
                  </li>
                  <li class="signature" id="closest-jQuery-object">
                      <h4 class="name">
                          <span class="version-details">添加的版本: 
<a href="1.6.htm" >1.6</a></span>.closest(
                          jQuery object )</h4>
                      <ul>
                          <li>
                              <div><strong>jQuery object</strong></div>
                              <div>类型: 
<a href="Types.htm#jQuery" >jQuery</a>
                              </div>
                              <div>一个用于匹配元素的jQuery对象。</div>
                          </li>
                      </ul>
                  </li>
                  <li class="signature" id="closest-element">
                      <h4 class="name">
                          <span class="version-details">添加的版本: 
<a href="1.6.htm" >1.6</a></span>.closest(
                          element )</h4>
                      <ul>
                          <li>
                              <div><strong>element</strong></div>
                              <div>类型: 
<a href="Types.htm#Element" >Element</a>
                              </div>
                              <div>一个用于匹配元素的DOM元素。</div>
                          </li>
                      </ul>
                  </li>
              </ul>
<div class="longdesc" id="entry-longdesc">
      <p>鉴于一个jQuery对象，表示一个DOM元素的集合，<code>.closest()</code>方法允许我们在DOM树上查找这些匹配的元素和他们的祖先元素，并且构造一个新的jQuery对象。
<a href="parents.htm" ><code>.parents()</code></a>和<code>.closest()</code>方法类似，它们都在DOM树遍历了。两者之间的差异，尽管细微，是重要的：</p>
      <table>
        <thead>
          <tr>
            <th>
              <code>.closest()</code>
            </th>
            <th>
<a href="parents.htm" >
                <code>.parents()</code>
              </a>
            </th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>开始于当前元素</td>
            <td>开始于父元素</td>
          </tr>
          <tr>
            <td>在 DOM 树中向上遍历，直到找到与提供的选择器相匹配的元素</td>
            <td>向上遍历DOM树到文档的根元素，每个祖先元素加入到临时集合，如果提供一个选择器，则会使用该选择器在集合中进行过滤</td>
          </tr>
          <tr>
            <td>返回包含零个或一个元素的jQuery对象</td>
            <td>返回包含零个，一个或多个元素的jQuery对象</td>
          </tr>
        </tbody>
      </table>
      <div class="syntaxhighlighter xml nogutter">
  <table>
    <tbody>
      <tr>
        <td class="gutter">
            <div class="line n1">1</div>
            <div class="line n2">2</div>
            <div class="line n3">3</div>
            <div class="line n4">4</div>
            <div class="line n5">5</div>
            <div class="line n6">6</div>
            <div class="line n7">7</div>
            <div class="line n8">8</div>
            <div class="line n9">9</div>
            <div class="line n10">10</div>
            <div class="line n11">11</div>
            <div class="line n12">12</div>
            <div class="line n13">13</div>
            <div class="line n14">14</div>
            <div class="line n15">15</div>
            <div class="line n16">16</div>
            <div class="line n17">17</div>
        </td>
        <td class="code">
          <pre><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">ul</span> <span class="attribute">id</span>=<span class="value">"one"</span> <span class="attribute">class</span>=<span class="value">"level-1"</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-i"</span>&gt;</span>I<span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">li</span> <span class="attribute">id</span>=<span class="value">"ii"</span> <span class="attribute">class</span>=<span class="value">"item-ii"</span>&gt;</span>II</code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"level-2"</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-a"</span>&gt;</span>A<span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-b"</span>&gt;</span>B</code></div></div><div class="container"><div class="line"><code>      <span class="tag">&lt;<span class="title">ul</span> <span class="attribute">class</span>=<span class="value">"level-3"</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>        <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-1"</span>&gt;</span>1<span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>        <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-2"</span>&gt;</span>2<span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>        <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-3"</span>&gt;</span>3<span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>      <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-c"</span>&gt;</span>C<span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">li</span> <span class="attribute">class</span>=<span class="value">"item-iii"</span>&gt;</span>III<span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></code></div></div></pre>
        </td>
      </tr>
    </tbody>
  </table>
</div>
      <p>假设我们从列表项 A 开始查找<code>&lt;ul&gt;</code>：</p>
      <div class="syntaxhighlighter javascript nogutter">
  <table>
    <tbody>
      <tr>
        <td class="gutter">
            <div class="line n1">1</div>
            <div class="line n2">2</div>
        </td>
        <td class="code">
          <pre><div class="container"><div class="line"><code>$(<span class="string">'li.item-a'</span>).closest(<span class="string">'ul'</span>)</code></div></div><div class="container"><div class="line"><code>  .css(<span class="string">'background-color'</span>, <span class="string">'red'</span>);</code></div></div></pre>
        </td>
      </tr>
    </tbody>
  </table>
</div>
      <p>这将改变level-2 <code>&lt;ul&gt;</code>的颜色，因为当向上遍历DOM树时，这是第一个遇到的匹配元素。</p>
      <p>假设我们这次搜索<code>&lt;li&gt;</code>元素，那么：</p>
      <div class="syntaxhighlighter javascript nogutter">
  <table>
    <tbody>
      <tr>
        <td class="gutter">
            <div class="line n1">1</div>
            <div class="line n2">2</div>
        </td>
        <td class="code">
          <pre><div class="container"><div class="line"><code>$(<span class="string">'li.item-a'</span>).closest(<span class="string">'li'</span>)</code></div></div><div class="container"><div class="line"><code>  .css(<span class="string">'background-color'</span>, <span class="string">'red'</span>);</code></div></div></pre>
        </td>
      </tr>
    </tbody>
  </table>
</div>
      <p>其结果是改变了列表项 A 的元素。<code>.closest()</code>方法是<em>从自身元素</em>开始查找的，然后在 DOM 树中向上遍历，直到找到了所提供的表达式列表项 A。</p>
      <p>我们可以传递一个DOM元素作为上下文在其中搜索最近的元素的。</p>
      <div class="syntaxhighlighter javascript nogutter">
  <table>
    <tbody>
      <tr>
        <td class="gutter">
            <div class="line n1">1</div>
            <div class="line n2">2</div>
            <div class="line n3">3</div>
            <div class="line n4">4</div>
            <div class="line n5">5</div>
        </td>
        <td class="code">
          <pre><div class="container"><div class="line"><code><span class="keyword">var</span> listItemII = document.getElementById(<span class="string">'ii'</span>);</code></div></div><div class="container"><div class="line"><code>$(<span class="string">'li.item-a'</span>).closest(<span class="string">'ul'</span>, listItemII)</code></div></div><div class="container"><div class="line"><code>  .css(<span class="string">'background-color'</span>, <span class="string">'red'</span>);</code></div></div><div class="container"><div class="line"><code>$(<span class="string">'li.item-a'</span>).closest(<span class="string">'#one'</span>, listItemII)</code></div></div><div class="container"><div class="line"><code>  .css(<span class="string">'background-color'</span>, <span class="string">'green'</span>);</code></div></div></pre>
        </td>
      </tr>
    </tbody>
  </table>
</div>
      <p>这将改变level-2 <code>&lt;ul&gt;</code>的颜色,因为它既是项目A的第一个<code>&lt;ul&gt;</code>祖先又是项目II的一个后裔。它将不会改变level-1 <code>&lt;ul&gt;</code>的 颜色 ，因为它不是项目II的后代。</p>
    </div>
<div class="jquery-api-top">
</div>
<section class="entry-examples" id="entry-examples"><header><h2 class="underline">例子:</h2></header><div class="entry-example" id="example-0">
<h4>Example: <span class="desc">显示什么样的事件委托能用closest完成。closest 列表元素或者其后代被点击进行切换一个黄色的背景。</span>
</h4>
<div class="syntaxhighlighter xml ">
  <table>
    <tbody>
      <tr>
        <td class="gutter">
            <div class="line n1">1</div>
            <div class="line n2">2</div>
            <div class="line n3">3</div>
            <div class="line n4">4</div>
            <div class="line n5">5</div>
            <div class="line n6">6</div>
            <div class="line n7">7</div>
            <div class="line n8">8</div>
            <div class="line n9">9</div>
            <div class="line n10">10</div>
            <div class="line n11">11</div>
            <div class="line n12">12</div>
            <div class="line n13">13</div>
            <div class="line n14">14</div>
            <div class="line n15">15</div>
            <div class="line n16">16</div>
            <div class="line n17">17</div>
            <div class="line n18">18</div>
            <div class="line n19">19</div>
            <div class="line n20">20</div>
            <div class="line n21">21</div>
            <div class="line n22">22</div>
        </td>
        <td class="code">
          <pre><div class="container"><div class="line"><code><span class="doctype">&lt;!DOCTYPE html&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">html</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">head</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">li</span> <span class="rules">{ <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">3</span>px;</span></span> <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">3</span>px;</span></span> <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#EEEEEE</span>;</span></span> <span class="rule">}</span></span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">li</span><span class="class">.hilight</span> <span class="rules">{ <span class="rule"><span class="attribute">background</span>:<span class="value"> yellow;</span></span> <span class="rule">}</span></span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;/<span class="title">style</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://code.jquery.com/jquery-latest.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">head</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">body</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">ul</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">b</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="title">b</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;<span class="title">li</span>&gt;</span>You can also <span class="tag">&lt;<span class="title">b</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="title">b</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></code></div></div><div class="container"><div class="line"><code>  $( document ).bind(<span class="string">"click"</span>, <span class="keyword">function</span>( e ) {</code></div></div><div class="container"><div class="line"><code>    $( e.target ).closest(<span class="string">"li"</span>).toggleClass(<span class="string">"hilight"</span>);</code></div></div><div class="container"><div class="line"><code>  });</code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code></div></div><div class="container"><div class="line"><code> </code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">body</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></div></div></pre>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<h4>Demo:</h4>
<div class="demo code-demo"></div>
</div>
<div class="entry-example" id="example-1">
<h4>Example: <span class="desc">传递一个jQuery对象给closest. closest 列表元素或者其后代被点击进行切换一个黄色的背景。</span>
</h4>
<div class="syntaxhighlighter xml ">
  <table>
    <tbody>
      <tr>
        <td class="gutter">
            <div class="line n1">1</div>
            <div class="line n2">2</div>
            <div class="line n3">3</div>
            <div class="line n4">4</div>
            <div class="line n5">5</div>
            <div class="line n6">6</div>
            <div class="line n7">7</div>
            <div class="line n8">8</div>
            <div class="line n9">9</div>
            <div class="line n10">10</div>
            <div class="line n11">11</div>
            <div class="line n12">12</div>
            <div class="line n13">13</div>
            <div class="line n14">14</div>
            <div class="line n15">15</div>
            <div class="line n16">16</div>
            <div class="line n17">17</div>
            <div class="line n18">18</div>
            <div class="line n19">19</div>
            <div class="line n20">20</div>
            <div class="line n21">21</div>
            <div class="line n22">22</div>
            <div class="line n23">23</div>
        </td>
        <td class="code">
          <pre><div class="container"><div class="line"><code><span class="doctype">&lt;!DOCTYPE html&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">html</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">head</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">style</span>&gt;</span><span class="css"></span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">li</span> <span class="rules">{ <span class="rule"><span class="attribute">margin</span>:<span class="value"> <span class="number">3</span>px;</span></span> <span class="rule"><span class="attribute">padding</span>:<span class="value"> <span class="number">3</span>px;</span></span> <span class="rule"><span class="attribute">background</span>:<span class="value"> <span class="hexcolor">#EEEEEE</span>;</span></span> <span class="rule">}</span></span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">li</span><span class="class">.hilight</span> <span class="rules">{ <span class="rule"><span class="attribute">background</span>:<span class="value"> yellow;</span></span> <span class="rule">}</span></span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;/<span class="title">style</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"http://code.jquery.com/jquery-latest.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">head</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">body</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;<span class="title">ul</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">b</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="title">b</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>    <span class="tag">&lt;<span class="title">li</span>&gt;</span>You can also <span class="tag">&lt;<span class="title">b</span>&gt;</span>Click me!<span class="tag">&lt;/<span class="title">b</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></code></div></div><div class="container"><div class="line"><code>  <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;<span class="title">script</span>&gt;</span><span class="javascript"></span></code></div></div><div class="container"><div class="line"><code>  <span class="keyword">var</span> $listElements = $(<span class="string">"li"</span>).css(<span class="string">"color"</span>, <span class="string">"blue"</span>);</code></div></div><div class="container"><div class="line"><code>  $( document ).bind(<span class="string">"click"</span>, <span class="keyword">function</span>( e ) {</code></div></div><div class="container"><div class="line"><code>    $( e.target ).closest( $listElements ).toggleClass(<span class="string">"hilight"</span>);</code></div></div><div class="container"><div class="line"><code>  });</code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">script</span>&gt;</span></code></div></div><div class="container"><div class="line"><code> </code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">body</span>&gt;</span></code></div></div><div class="container"><div class="line"><code><span class="tag">&lt;/<span class="title">html</span>&gt;</span></code></div></div></pre>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<h4>Demo:</h4>
<div class="demo code-demo"></div>
</div></section>
</div></article><article id="closest2" class="entry method"><h2 class="section-title">
<span class="name">.closest( selectors [, context ] )</span><span class="returns">返回: 
<a href="Types.htm#Array" >Array</a></span><span class="version-details">version deprecated: 
<a href="1.7.htm" >1.7</a>, removed: 
<a href="1.8.htm" >1.8</a></span>
</h2>
<div class="entry-wrapper">
<p class="desc"><strong>描述: </strong>以数组的形式返回与选择器相匹配的所有元素，从当前元素开始，在 DOM 树中向上遍历。</p>
<ul class="signatures"><li class="signature" id="closest-selectors-context">
<h4 class="name">
<span class="version-details">添加的版本: 
<a href="1.4.htm" >1.4</a></span>.closest( selectors [, context ] )</h4>
<ul>
<li>
<div><strong>选择器</strong></div>
<div>类型: 
<a href="Types.htm#Array" >Array</a>
</div>
<div>数组或字符串，其中包含一个选择表达式匹配的元素对（也可以是一个jQuery对象）。</div>
</li>
<li>
<div><strong>context</strong></div>
<div>类型: 
<a href="Types.htm#Element" >Element</a>
</div>
<div>匹配元素可能在这个 DOM 元素内查找到。</div>
</li>
</ul>
</li></ul>
<div class="longdesc" id="entry-longdesc-1">
      <div class="warning"><strong>下面这个方法 (only!) jQuery1.7中不赞成使用，在jQuery1.8中被<em>删除</em>。</strong>它主要是为了让插件作者在内部使用。</div>
    </div>
</div></article>  </div><!-- .entry-content -->
</article>        
</div>
  </div>
